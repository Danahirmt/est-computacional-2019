<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3.2 Datos limpios | Estadística Computacional</title>
  <meta name="description" content="Curso de estadística computacional, Maestría en Ciencia de Datos, ITAM 2019." />
  <meta name="generator" content="bookdown 0.12.1 and GitBook 2.6.7" />

  <meta property="og:title" content="3.2 Datos limpios | Estadística Computacional" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Curso de estadística computacional, Maestría en Ciencia de Datos, ITAM 2019." />
  <meta name="github-repo" content="tereom/est-computacional-2019" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3.2 Datos limpios | Estadística Computacional" />
  
  <meta name="twitter:description" content="Curso de estadística computacional, Maestría en Ciencia de Datos, ITAM 2019." />
  

<meta name="author" content="María Teresa Ortiz" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="transformacion-de-datos.html"/>
<link rel="next" href="tareas.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/toc.css" type="text/css" />
<link rel="stylesheet" href="css/font-awesome.min.css" type="text/css" />
<link rel="stylesheet" href="css/cajas.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Estadística Computacional</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Información del curso</a><ul>
<li class="chapter" data-level="" data-path="temario.html"><a href="temario.html"><i class="fa fa-check"></i>Temario</a><ul>
<li class="chapter" data-level="" data-path="temario.html"><a href="temario.html#calificacion"><i class="fa fa-check"></i>Calificación</a></li>
<li class="chapter" data-level="" data-path="temario.html"><a href="temario.html#software"><i class="fa fa-check"></i>Software</a></li>
<li class="chapter" data-level="" data-path="temario.html"><a href="temario.html#otros-recursos"><i class="fa fa-check"></i>Otros recursos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="principios-visualizacion.html"><a href="principios-visualizacion.html"><i class="fa fa-check"></i><b>1</b> Principios visualización</a><ul>
<li class="chapter" data-level="1.1" data-path="introduccion.html"><a href="introduccion.html"><i class="fa fa-check"></i><b>1.1</b> Introducción</a><ul>
<li class="chapter" data-level="" data-path="introduccion.html"><a href="introduccion.html#visualizacion-de-datos-en-la-estadistica"><i class="fa fa-check"></i>Visualización de datos en la estadística</a></li>
<li class="chapter" data-level="" data-path="introduccion.html"><a href="introduccion.html#visualizacion-popular-de-datos"><i class="fa fa-check"></i>Visualización popular de datos</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="teoria-de-visualizacion-de-datos.html"><a href="teoria-de-visualizacion-de-datos.html"><i class="fa fa-check"></i><b>1.2</b> Teoría de visualización de datos</a></li>
<li class="chapter" data-level="1.3" data-path="factor-de-engano-y-chartjunk.html"><a href="factor-de-engano-y-chartjunk.html"><i class="fa fa-check"></i><b>1.3</b> Factor de engaño y Chartjunk</a></li>
<li class="chapter" data-level="1.4" data-path="pequenos-multiplos-y-densidad-grafica.html"><a href="pequenos-multiplos-y-densidad-grafica.html"><i class="fa fa-check"></i><b>1.4</b> Pequeños múltiplos y densidad gráfica</a></li>
<li class="chapter" data-level="1.5" data-path="mas-pequenos-multiplos.html"><a href="mas-pequenos-multiplos.html"><i class="fa fa-check"></i><b>1.5</b> Más pequeños múltiplos</a></li>
<li class="chapter" data-level="1.6" data-path="tinta-de-datos.html"><a href="tinta-de-datos.html"><i class="fa fa-check"></i><b>1.6</b> Tinta de datos</a></li>
<li class="chapter" data-level="1.7" data-path="decoracion.html"><a href="decoracion.html"><i class="fa fa-check"></i><b>1.7</b> Decoración</a></li>
<li class="chapter" data-level="1.8" data-path="percepcion-de-escala.html"><a href="percepcion-de-escala.html"><i class="fa fa-check"></i><b>1.8</b> Percepción de escala</a></li>
<li class="chapter" data-level="1.9" data-path="ejemplos-grafica-de-minard.html"><a href="ejemplos-grafica-de-minard.html"><i class="fa fa-check"></i><b>1.9</b> Ejemplos: gráfica de Minard</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduccion-a-r-y-al-paquete-ggplot2.html"><a href="introduccion-a-r-y-al-paquete-ggplot2.html"><i class="fa fa-check"></i><b>2</b> Introducción a R y al paquete ggplot2</a><ul>
<li class="chapter" data-level="2.1" data-path="r-primeros-pasos.html"><a href="r-primeros-pasos.html"><i class="fa fa-check"></i><b>2.1</b> R: primeros pasos</a><ul>
<li class="chapter" data-level="" data-path="r-primeros-pasos.html"><a href="r-primeros-pasos.html#r-en-analisis-de-datos"><i class="fa fa-check"></i>R en análisis de datos</a></li>
<li class="chapter" data-level="" data-path="r-primeros-pasos.html"><a href="r-primeros-pasos.html#paquetes-y-el-tidyverse"><i class="fa fa-check"></i>Paquetes y el Tidyverse</a></li>
<li class="chapter" data-level="" data-path="r-primeros-pasos.html"><a href="r-primeros-pasos.html#recursos"><i class="fa fa-check"></i>Recursos</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="visualizacion-con-ggplot2.html"><a href="visualizacion-con-ggplot2.html"><i class="fa fa-check"></i><b>2.2</b> Visualización con ggplot2</a><ul>
<li class="chapter" data-level="" data-path="visualizacion-con-ggplot2.html"><a href="visualizacion-con-ggplot2.html#recursos-1"><i class="fa fa-check"></i>Recursos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="manipulacion-y-agrupacion-de-datos.html"><a href="manipulacion-y-agrupacion-de-datos.html"><i class="fa fa-check"></i><b>3</b> Manipulación y agrupación de datos</a><ul>
<li class="chapter" data-level="3.1" data-path="transformacion-de-datos.html"><a href="transformacion-de-datos.html"><i class="fa fa-check"></i><b>3.1</b> Transformación de datos</a><ul>
<li class="chapter" data-level="" data-path="transformacion-de-datos.html"><a href="transformacion-de-datos.html#datos"><i class="fa fa-check"></i>Datos</a></li>
<li class="chapter" data-level="" data-path="transformacion-de-datos.html"><a href="transformacion-de-datos.html#filtrar"><i class="fa fa-check"></i>Filtrar</a></li>
<li class="chapter" data-level="" data-path="transformacion-de-datos.html"><a href="transformacion-de-datos.html#seleccionar"><i class="fa fa-check"></i>Seleccionar</a></li>
<li class="chapter" data-level="" data-path="transformacion-de-datos.html"><a href="transformacion-de-datos.html#ordenar"><i class="fa fa-check"></i>Ordenar</a></li>
<li class="chapter" data-level="" data-path="transformacion-de-datos.html"><a href="transformacion-de-datos.html#mutar"><i class="fa fa-check"></i>Mutar</a></li>
<li class="chapter" data-level="" data-path="transformacion-de-datos.html"><a href="transformacion-de-datos.html#summarise-y-resumenes-por-grupo"><i class="fa fa-check"></i>Summarise y resúmenes por grupo</a></li>
<li class="chapter" data-level="" data-path="transformacion-de-datos.html"><a href="transformacion-de-datos.html#variables-por-grupo"><i class="fa fa-check"></i>Variables por grupo</a></li>
<li class="chapter" data-level="" data-path="transformacion-de-datos.html"><a href="transformacion-de-datos.html#verbos-de-dos-tablas"><i class="fa fa-check"></i>Verbos de dos tablas</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="datos-limpios.html"><a href="datos-limpios.html"><i class="fa fa-check"></i><b>3.2</b> Datos limpios</a><ul>
<li class="chapter" data-level="" data-path="datos-limpios.html"><a href="datos-limpios.html#limpieza-bases-de-datos"><i class="fa fa-check"></i>Limpieza bases de datos</a></li>
<li class="chapter" data-level="" data-path="datos-limpios.html"><a href="datos-limpios.html#los-encabezados-de-las-columanas-son-valores"><i class="fa fa-check"></i>Los encabezados de las columanas son valores</a></li>
<li class="chapter" data-level="" data-path="datos-limpios.html"><a href="datos-limpios.html#una-columna-asociada-a-mas-de-una-variable"><i class="fa fa-check"></i>Una columna asociada a más de una variable</a></li>
<li class="chapter" data-level="" data-path="datos-limpios.html"><a href="datos-limpios.html#variables-almacenadas-en-filas-y-columnas"><i class="fa fa-check"></i>Variables almacenadas en filas y columnas</a></li>
<li class="chapter" data-level="" data-path="datos-limpios.html"><a href="datos-limpios.html#mas-de-un-tipo-de-observacion-en-una-misma-tabla"><i class="fa fa-check"></i>Mas de un tipo de observación en una misma tabla</a></li>
<li class="chapter" data-level="" data-path="datos-limpios.html"><a href="datos-limpios.html#una-misma-unidad-observacional-esta-almacenada-en-multiples-tablas"><i class="fa fa-check"></i>Una misma unidad observacional está almacenada en múltiples tablas</a></li>
<li class="chapter" data-level="" data-path="datos-limpios.html"><a href="datos-limpios.html#otras-consideraciones"><i class="fa fa-check"></i>Otras consideraciones</a></li>
<li class="chapter" data-level="" data-path="datos-limpios.html"><a href="datos-limpios.html#recursos-adicionales"><i class="fa fa-check"></i>Recursos adicionales</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="tareas.html"><a href="tareas.html"><i class="fa fa-check"></i>Tareas</a><ul>
<li class="chapter" data-level="3.3" data-path="visualizacion.html"><a href="visualizacion.html"><i class="fa fa-check"></i><b>3.3</b> Visualización</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="referencias.html"><a href="referencias.html"><i class="fa fa-check"></i>Referencias</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado con bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Estadística Computacional</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="datos-limpios" class="section level2">
<h2><span class="header-section-number">3.2</span> Datos limpios</h2>
<p>Una vez que importamos datos a R es conveniente limpiarlos, esto implica
almacenarlos de una manera consisistente que nos permita
enfocarnos en responder preguntas de los datos en lugar de estar luchando
con los datos. Entonces, <strong>datos limpios</strong> son datos que facilitan las tareas
del análisis de datos:</p>
<ul>
<li><p><strong>Visualización</strong>: Resúmenes de datos usando gráficas, análisis exploratorio, o presentación de resultados.</p></li>
<li><p><strong>Manipulación</strong>: Manipulación de variables como agregar, filtrar, reordenar,
transformar.</p></li>
<li><p><strong>Modelación</strong>: Ajustar modelos es sencillo si los datos están en la forma
correcta.</p></li>
</ul>
<p>Los principios de <em>datos limpios</em> <span class="citation">(Wickham <a href="#ref-tidy">2014</a>)</span>
proveen una manera estándar de organizar la información:</p>
<ol style="list-style-type: decimal">
<li>Cada variable forma una columna.</li>
<li>Cada observación forma un renglón.</li>
<li><em>Cada tipo de unidad observacional forma una tabla.</em></li>
</ol>
<p>Vale la pena notar que los principios de los datos limpios se pueden ver como
teoría de algebra relacional para estadísticos, estós principios equivalen a
<a href="https://en.wikipedia.org/wiki/Third_normal_form">la tercera forma normal de Codd</a>
con enfoque en una sola tabla de datos en
lugar de muchas conectadas en bases de datos relacionales.</p>
<p>Veamos un ejemplo:</p>
<p>La mayor parte de las bases de datos en estadística tienen forma rectangular,
¿cuántas variables tiene la siguiente tabla?</p>
<div class="mi-tabla">
<table>
<thead>
<tr class="header">
<th></th>
<th>tratamientoA</th>
<th>tratamientoB</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Juan Aguirre</td>
<td>-</td>
<td>2</td>
</tr>
<tr class="even">
<td>Ana Bernal</td>
<td>16</td>
<td>11</td>
</tr>
<tr class="odd">
<td>José López</td>
<td>3</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
<p>La tabla anterior también se puede estructurar de la siguiente manera:</p>
<div class="mi-tabla">
<table>
<thead>
<tr class="header">
<th></th>
<th>Juan Aguirre</th>
<th>Ana Bernal</th>
<th>José López</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>tratamientoA</td>
<td>-</td>
<td>16</td>
<td>3</td>
</tr>
<tr class="even">
<td>tratamientoB</td>
<td>2</td>
<td>11</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
<p>Si vemos los principios (cada variable forma una columna, cada observación
forma un renglón, cada tipo de unidad observacional forma una tabla), ¿las
tablas anteriores cumplen los principios?</p>
<p>Para responder la pregunta identifiquemos primero cuáles son las variables y
cuáles las observaciones de esta pequeña base. Las variables son:
persona/nombre, tratamiento y resultado. Entonces, siguiendo los principios de
<em>datos limpios</em> obtenemos la siguiente estructura:</p>
<div class="mi-tabla">
<table>
<thead>
<tr class="header">
<th>nombre</th>
<th>tratamiento</th>
<th>resultado</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Juan Aguirre</td>
<td>a</td>
<td>-</td>
</tr>
<tr class="even">
<td>Ana Bernal</td>
<td>a</td>
<td>16</td>
</tr>
<tr class="odd">
<td>José López</td>
<td>a</td>
<td>3</td>
</tr>
<tr class="even">
<td>Juan Aguirre</td>
<td>b</td>
<td>2</td>
</tr>
<tr class="odd">
<td>Ana Bernal</td>
<td>b</td>
<td>11</td>
</tr>
<tr class="even">
<td>José López</td>
<td>b</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
<div id="limpieza-bases-de-datos" class="section level3 unnumbered">
<h3>Limpieza bases de datos</h3>
<p>Los principios de los datos limpios parecen obvios pero la mayor parte de los
datos no los cumplen debido a:</p>
<ol style="list-style-type: decimal">
<li>La mayor parte de la gente no está familiarizada con los principios y es
difícil derivarlos por uno mismo.<br />
</li>
<li>Los datos suelen estar organizados para facilitar otros aspectos que no son
análisis, por ejemplo, la captura.</li>
</ol>
<p>Algunos de los problemas más comunes en las bases de datos que no están
<em>limpias</em> son:</p>
<ul>
<li>Los encabezados de las columnas son valores y no nombres de variables.</li>
<li>Más de una variable por columna.</li>
<li>Las variables están organizadas tanto en filas como en columnas.</li>
<li>Más de un tipo de observación en una tabla.</li>
<li>Una misma unidad observacional está almacenada en múltiples tablas.</li>
</ul>
<p>La mayor parte de estos problemas se pueden arreglar con pocas herramientas,
a continuación veremos como <em>limpiar</em> datos usando 2 funciones del paquete
<code>tidyr</code>:</p>
<ul>
<li><strong>gather</strong>: recibe múltiples columnas y las junta en pares de valores y
nombres, convierte los datos anchos en largos.<br />
</li>
<li><strong>spread</strong>: recibe 2 columnas y las separa, haciendo los datos más anchos.</li>
</ul>
<p>Repasaremos los problemas más comunes que se encuentran en conjuntos de datos
sucios y mostraremos como se puede manipular la tabla de datos (usando las
funciones <em>gather</em> y <em>spread</em>) con el fin de estructurarla para que cumpla los
principios de datos limpios.</p>
</div>
<div id="los-encabezados-de-las-columanas-son-valores" class="section level3 unnumbered">
<h3>Los encabezados de las columanas son valores</h3>
<p>Usaremos ejemplos para entender los conceptos más facilmente. Comenzaremos
con una tabla de datos que contiene las mediciones de partículas suspendidas
PM2.5 de la red automática de monitoreo atmosférico
(<a href="http://www.aire.cdmx.gob.mx">RAMA</a>) para los primeros meses del 2019.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" data-line-number="1"><span class="kw">data</span>(pm25_<span class="dv">2019</span>)</a></code></pre></div>
<p>¿Cuáles son las variables en estos datos?</p>
<p>Esta base de datos tiene 4 variables: fecha, hora, estación y medición
(en <span class="math inline">\(\mu g/m^3\)</span>, microgramos por metro cúbico).</p>
<p>Notemos que al alargar los datos desapareceran las columnas que se agrupan y dan
lugar a dos nuevas columnas: la correspondiente a estación y la
correspondiente a medición. Entonces, para alargar una base de datos usamos la
función <code>gather</code> que recibe los argumentos:</p>
<ul>
<li>data: base de datos que vamos a reestructurar.<br />
</li>
<li>key: nombre de la nueva variable que contiene lo que fueron los nombres
de columnas que apilamos.<br />
</li>
<li>value: nombre de la variable que almacenará los valores que corresponden a
cada <em>key</em>.<br />
</li>
<li>…: lo último que especificamos son las columnas que vamos a apilar, la
notación para seleccionarlas es la misma que usamos con <code>select()</code>.</li>
</ul>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1">pm25_<span class="dv">2019</span>_tidy &lt;-<span class="st"> </span><span class="kw">gather</span>(pm25_<span class="dv">2019</span>, <span class="dt">key =</span> ESTACION, <span class="dt">value =</span> MEDICION, <span class="op">-</span>FECHA, <span class="op">-</span>HORA)</a>
<a class="sourceLine" id="cb64-2" data-line-number="2"><span class="kw">head</span>(pm25_<span class="dv">2019</span>_tidy)</a>
<a class="sourceLine" id="cb64-3" data-line-number="3"><span class="co">#&gt; # A tibble: 6 x 4</span></a>
<a class="sourceLine" id="cb64-4" data-line-number="4"><span class="co">#&gt;   FECHA                HORA ESTACION MEDICION</span></a>
<a class="sourceLine" id="cb64-5" data-line-number="5"><span class="co">#&gt;   &lt;dttm&gt;              &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb64-6" data-line-number="6"><span class="co">#&gt; 1 2019-01-01 00:00:00     1 AJM            19</span></a>
<a class="sourceLine" id="cb64-7" data-line-number="7"><span class="co">#&gt; 2 2019-01-01 00:00:00     2 AJM            17</span></a>
<a class="sourceLine" id="cb64-8" data-line-number="8"><span class="co">#&gt; 3 2019-01-01 00:00:00     3 AJM            14</span></a>
<a class="sourceLine" id="cb64-9" data-line-number="9"><span class="co">#&gt; 4 2019-01-01 00:00:00     4 AJM             6</span></a>
<a class="sourceLine" id="cb64-10" data-line-number="10"><span class="co">#&gt; 5 2019-01-01 00:00:00     5 AJM             4</span></a>
<a class="sourceLine" id="cb64-11" data-line-number="11"><span class="co">#&gt; 6 2019-01-01 00:00:00     6 AJM             7</span></a>
<a class="sourceLine" id="cb64-12" data-line-number="12"><span class="kw">tail</span>(pm25_<span class="dv">2019</span>_tidy)</a>
<a class="sourceLine" id="cb64-13" data-line-number="13"><span class="co">#&gt; # A tibble: 6 x 4</span></a>
<a class="sourceLine" id="cb64-14" data-line-number="14"><span class="co">#&gt;   FECHA                HORA ESTACION MEDICION</span></a>
<a class="sourceLine" id="cb64-15" data-line-number="15"><span class="co">#&gt;   &lt;dttm&gt;              &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb64-16" data-line-number="16"><span class="co">#&gt; 1 2019-07-31 00:00:00    19 XAL            12</span></a>
<a class="sourceLine" id="cb64-17" data-line-number="17"><span class="co">#&gt; 2 2019-07-31 00:00:00    20 XAL            11</span></a>
<a class="sourceLine" id="cb64-18" data-line-number="18"><span class="co">#&gt; 3 2019-07-31 00:00:00    21 XAL             7</span></a>
<a class="sourceLine" id="cb64-19" data-line-number="19"><span class="co">#&gt; 4 2019-07-31 00:00:00    22 XAL            NA</span></a>
<a class="sourceLine" id="cb64-20" data-line-number="20"><span class="co">#&gt; 5 2019-07-31 00:00:00    23 XAL             7</span></a>
<a class="sourceLine" id="cb64-21" data-line-number="21"><span class="co">#&gt; 6 2019-07-31 00:00:00    24 XAL             7</span></a></code></pre></div>
<p>Observemos que en la tabla ancha teníamos bajo la columna <em>&lt;$10k</em>, en el renglón
correspondiente a <em>Agnostic</em> un valor de 27, y podemos ver que este valor en
la tabla larga se almacena bajo la columna frecuencia y corresponde a religión
<em>Agnostic</em>, income <em>&lt;$10k</em>. También es importante ver que en este ejemplo
especificamos las columnas a apilar identificando la que <strong>no</strong> vamos a alargar
con un signo negativo: es decir apila todas las columnas menos religión.</p>
<p>La nueva estructura de la base de datos nos permite, por ejemplo, hacer
fácilmente una gráfica donde podemos comparar las diferencias en las
frecuencias.</p>
<p>Nota: En esta sección no explicaremos las funciones de graficación pues estas
se cubren en las notas introductorias a R. En esta parte nos queremos concentrar
en como limpiar datos y ejemplificar lo sencillo que es trabajar con datos
limpios, esto es, una vez que los datos fueron reestructurados es fácil
construir gráficas y resúmenes.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" data-line-number="1">pm25_<span class="dv">2019</span>_tidy <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb65-2" data-line-number="2"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb65-3" data-line-number="3">        <span class="dt">FALTANTE =</span> <span class="kw">is.na</span>(MEDICION), </a>
<a class="sourceLine" id="cb65-4" data-line-number="4">        <span class="dt">ESTACION =</span> <span class="kw">reorder</span>(ESTACION, FALTANTE, sum)</a>
<a class="sourceLine" id="cb65-5" data-line-number="5">        ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb65-6" data-line-number="6"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> FECHA, <span class="dt">y =</span> HORA, <span class="dt">fill =</span> <span class="kw">is.na</span>(MEDICION))) <span class="op">+</span></a>
<a class="sourceLine" id="cb65-7" data-line-number="7"><span class="st">    </span><span class="kw">geom_raster</span>(<span class="dt">alpha =</span> <span class="fl">0.8</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb65-8" data-line-number="8"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>ESTACION) <span class="op">+</span></a>
<a class="sourceLine" id="cb65-9" data-line-number="9"><span class="st">    </span><span class="kw">scale_fill_manual</span>(<span class="st">&quot;faltante&quot;</span>, </a>
<a class="sourceLine" id="cb65-10" data-line-number="10">        <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;TRUE&quot;</span> =<span class="st"> &quot;salmon&quot;</span>, <span class="st">&quot;FALSE&quot;</span> =<span class="st"> &quot;gray&quot;</span>))</a></code></pre></div>
<p><img src="02-manipulacion_files/figure-html/unnamed-chunk-47-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Otro ejemplo, veamos los datos <code>df_edu</code>, ¿cuántas variables tenemos?</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1">df_edu</a>
<a class="sourceLine" id="cb66-2" data-line-number="2"><span class="co">#&gt; # A tibble: 7,371 x 16</span></a>
<a class="sourceLine" id="cb66-3" data-line-number="3"><span class="co">#&gt;    state_code municipio_code region state_name state_abbr municipio_name</span></a>
<a class="sourceLine" id="cb66-4" data-line-number="4"><span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;          &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;         </span></a>
<a class="sourceLine" id="cb66-5" data-line-number="5"><span class="co">#&gt;  1 01         001            01001  Aguascali… AGS        Aguascalientes</span></a>
<a class="sourceLine" id="cb66-6" data-line-number="6"><span class="co">#&gt;  2 01         001            01001  Aguascali… AGS        Aguascalientes</span></a>
<a class="sourceLine" id="cb66-7" data-line-number="7"><span class="co">#&gt;  3 01         001            01001  Aguascali… AGS        Aguascalientes</span></a>
<a class="sourceLine" id="cb66-8" data-line-number="8"><span class="co">#&gt;  4 01         002            01002  Aguascali… AGS        Asientos      </span></a>
<a class="sourceLine" id="cb66-9" data-line-number="9"><span class="co">#&gt;  5 01         002            01002  Aguascali… AGS        Asientos      </span></a>
<a class="sourceLine" id="cb66-10" data-line-number="10"><span class="co">#&gt;  6 01         002            01002  Aguascali… AGS        Asientos      </span></a>
<a class="sourceLine" id="cb66-11" data-line-number="11"><span class="co">#&gt;  7 01         003            01003  Aguascali… AGS        Calvillo      </span></a>
<a class="sourceLine" id="cb66-12" data-line-number="12"><span class="co">#&gt;  8 01         003            01003  Aguascali… AGS        Calvillo      </span></a>
<a class="sourceLine" id="cb66-13" data-line-number="13"><span class="co">#&gt;  9 01         003            01003  Aguascali… AGS        Calvillo      </span></a>
<a class="sourceLine" id="cb66-14" data-line-number="14"><span class="co">#&gt; 10 01         004            01004  Aguascali… AGS        Cosío         </span></a>
<a class="sourceLine" id="cb66-15" data-line-number="15"><span class="co">#&gt; # … with 7,361 more rows, and 10 more variables: sex &lt;chr&gt;, pop_15 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb66-16" data-line-number="16"><span class="co">#&gt; #   no_school &lt;dbl&gt;, preschool &lt;dbl&gt;, elementary &lt;dbl&gt;, secondary &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb66-17" data-line-number="17"><span class="co">#&gt; #   highschool &lt;dbl&gt;, higher_edu &lt;dbl&gt;, other &lt;dbl&gt;, schoolyrs &lt;dbl&gt;</span></a></code></pre></div>
<p>Notemos que el nivel de escolaridad esta guardado en 6 columnas (preschool,
elementary, …, other), este tipo de almacenamiento no es <em>limpio</em> pero
puede ser útil al momento de ingresar la información.</p>
<p>Para tener datos <em>limpios</em> apilamos los niveles de escolaridad de manera que
sea una sola columna (nuevamente alargamos los datos):</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" data-line-number="1">df_edu_tidy &lt;-<span class="st"> </span><span class="kw">gather</span>(<span class="dt">data =</span> df_edu, grade, percent, preschool<span class="op">:</span>other, </a>
<a class="sourceLine" id="cb67-2" data-line-number="2">    <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb67-3" data-line-number="3"><span class="kw">glimpse</span>(df_edu_tidy)</a>
<a class="sourceLine" id="cb67-4" data-line-number="4"><span class="co">#&gt; Observations: 44,226</span></a>
<a class="sourceLine" id="cb67-5" data-line-number="5"><span class="co">#&gt; Variables: 12</span></a>
<a class="sourceLine" id="cb67-6" data-line-number="6"><span class="co">#&gt; $ state_code     &lt;chr&gt; &quot;01&quot;, &quot;01&quot;, &quot;01&quot;, &quot;01&quot;, &quot;01&quot;, &quot;01&quot;, &quot;01&quot;, &quot;01&quot;, &quot;…</span></a>
<a class="sourceLine" id="cb67-7" data-line-number="7"><span class="co">#&gt; $ municipio_code &lt;chr&gt; &quot;001&quot;, &quot;001&quot;, &quot;001&quot;, &quot;002&quot;, &quot;002&quot;, &quot;002&quot;, &quot;003&quot;, …</span></a>
<a class="sourceLine" id="cb67-8" data-line-number="8"><span class="co">#&gt; $ region         &lt;chr&gt; &quot;01001&quot;, &quot;01001&quot;, &quot;01001&quot;, &quot;01002&quot;, &quot;01002&quot;, &quot;010…</span></a>
<a class="sourceLine" id="cb67-9" data-line-number="9"><span class="co">#&gt; $ state_name     &lt;chr&gt; &quot;Aguascalientes&quot;, &quot;Aguascalientes&quot;, &quot;Aguascalient…</span></a>
<a class="sourceLine" id="cb67-10" data-line-number="10"><span class="co">#&gt; $ state_abbr     &lt;chr&gt; &quot;AGS&quot;, &quot;AGS&quot;, &quot;AGS&quot;, &quot;AGS&quot;, &quot;AGS&quot;, &quot;AGS&quot;, &quot;AGS&quot;, …</span></a>
<a class="sourceLine" id="cb67-11" data-line-number="11"><span class="co">#&gt; $ municipio_name &lt;chr&gt; &quot;Aguascalientes&quot;, &quot;Aguascalientes&quot;, &quot;Aguascalient…</span></a>
<a class="sourceLine" id="cb67-12" data-line-number="12"><span class="co">#&gt; $ sex            &lt;chr&gt; &quot;Total&quot;, &quot;Hombres&quot;, &quot;Mujeres&quot;, &quot;Total&quot;, &quot;Hombres&quot;…</span></a>
<a class="sourceLine" id="cb67-13" data-line-number="13"><span class="co">#&gt; $ pop_15         &lt;dbl&gt; 631064, 301714, 329350, 31013, 14991, 16022, 3867…</span></a>
<a class="sourceLine" id="cb67-14" data-line-number="14"><span class="co">#&gt; $ no_school      &lt;dbl&gt; 2.662329, 2.355211, 2.943677, 4.011221, 4.389300,…</span></a>
<a class="sourceLine" id="cb67-15" data-line-number="15"><span class="co">#&gt; $ schoolyrs      &lt;dbl&gt; 10.211152, 10.380144, 10.056383, 7.854005, 7.6920…</span></a>
<a class="sourceLine" id="cb67-16" data-line-number="16"><span class="co">#&gt; $ grade          &lt;chr&gt; &quot;preschool&quot;, &quot;preschool&quot;, &quot;preschool&quot;, &quot;preschool…</span></a>
<a class="sourceLine" id="cb67-17" data-line-number="17"><span class="co">#&gt; $ percent        &lt;dbl&gt; 0.17335801, 0.17466873, 0.17215728, 0.25795634, 0…</span></a></code></pre></div>
<p>Notemos que en esta ocasión especificamos las columnas que vamos a apilar
indicando el nombre de la primera de ellas seguido de <code>:</code> y por último el
nombre de la última variable a apilar.</p>
<p>Por otra parte, el parámetro <code>na.rm = TRUE</code> se utiliza para eliminar los
renglones con valores faltantes en la columna de porcentaje, esto es, eliminamos
aquellas observaciones que tenían NA en la columnas de nivel de escolaridad de
la tabla ancha. En este caso optamos por que los faltantes sean implícitos, la
conveniencia de tenerlos implícitos/explícitos dependerá de la aplicación.</p>
<p>Con los datos limpios es facil hacer manipulaciones y graficar.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1">df_edu_cdmx &lt;-<span class="st"> </span>df_edu_tidy <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb68-2" data-line-number="2"><span class="st">    </span><span class="kw">filter</span>(state_abbr <span class="op">==</span><span class="st"> &quot;CDMX&quot;</span>, sex <span class="op">!=</span><span class="st"> &quot;Total&quot;</span>, grade <span class="op">!=</span><span class="st"> &quot;other&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb68-3" data-line-number="3"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">municipio_name =</span> <span class="kw">reorder</span>(municipio_name, percent, last))</a>
<a class="sourceLine" id="cb68-4" data-line-number="4"></a>
<a class="sourceLine" id="cb68-5" data-line-number="5"><span class="kw">ggplot</span>(df_edu_cdmx, <span class="kw">aes</span>(<span class="dt">x =</span> grade, </a>
<a class="sourceLine" id="cb68-6" data-line-number="6">    <span class="dt">y =</span> percent, <span class="dt">group =</span> sex, <span class="dt">color =</span> sex)) <span class="op">+</span></a>
<a class="sourceLine" id="cb68-7" data-line-number="7"><span class="st">    </span><span class="kw">geom_path</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb68-8" data-line-number="8"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span>municipio_name) <span class="op">+</span></a>
<a class="sourceLine" id="cb68-9" data-line-number="9"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">60</span>, <span class="dt">hjust =</span> <span class="dv">1</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb68-10" data-line-number="10"><span class="st">    </span><span class="kw">scale_x_discrete</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="st">&quot;preschool&quot;</span>, <span class="st">&quot;elementary&quot;</span>, </a>
<a class="sourceLine" id="cb68-11" data-line-number="11">        <span class="st">&quot;secondary&quot;</span>, <span class="st">&quot;highschool&quot;</span>, <span class="st">&quot;higher_edu&quot;</span>))</a></code></pre></div>
<p><img src="02-manipulacion_files/figure-html/unnamed-chunk-50-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="una-columna-asociada-a-mas-de-una-variable" class="section level3 unnumbered">
<h3>Una columna asociada a más de una variable</h3>
<p>La siguiente base de datos proviene de la Organización Mundial de la Salud y
contiene el número de casos confirmados de tuberculosis por país y año, la
información esta por grupo demográfico de acuerdo a sexo (m, f), y edad (0-4,
5-14, etc). Los datos están disponibles en <a href="http://www.who.int/tb/country/data/download/en/" class="uri">http://www.who.int/tb/country/data/download/en/</a>.</p>
<p>Utilizaremos un subconjunto de los datos de la prueba ENLACE a nivel primaria,
la prueba <a href="http://www.enlace.sep.gob.mx/ba/">ENLACE</a> evaluaba a todos los
alumnos de tercero a sexto de primaria y a los alumnos de secundaria del país en
3 áreas: <em>español</em>, <em>matemáticas</em> y <em>formación cívica y ética</em>.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1"><span class="kw">data</span>(<span class="st">&quot;enlacep_2013&quot;</span>)</a>
<a class="sourceLine" id="cb69-2" data-line-number="2">enlacep_sub_<span class="dv">2013</span> &lt;-<span class="st"> </span>enlacep_<span class="dv">2013</span> <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb69-3" data-line-number="3"><span class="st">    </span><span class="kw">select</span>(CVE_ENT<span class="op">:</span>PUNT_FCE_<span class="dv">6</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb69-4" data-line-number="4"><span class="st">    </span><span class="kw">sample_n</span>(<span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb69-5" data-line-number="5"><span class="kw">glimpse</span>(enlacep_sub_<span class="dv">2013</span>)</a>
<a class="sourceLine" id="cb69-6" data-line-number="6"><span class="co">#&gt; Observations: 1,000</span></a>
<a class="sourceLine" id="cb69-7" data-line-number="7"><span class="co">#&gt; Variables: 22</span></a>
<a class="sourceLine" id="cb69-8" data-line-number="8"><span class="co">#&gt; $ CVE_ENT    &lt;chr&gt; &quot;15&quot;, &quot;06&quot;, &quot;31&quot;, &quot;30&quot;, &quot;07&quot;, &quot;07&quot;, &quot;22&quot;, &quot;11&quot;, &quot;22&quot;,…</span></a>
<a class="sourceLine" id="cb69-9" data-line-number="9"><span class="co">#&gt; $ NOM_ENT    &lt;chr&gt; &quot;MEXICO&quot;, &quot;COLIMA&quot;, &quot;YUCATAN&quot;, &quot;VERACRUZ&quot;, &quot;CHIAPAS&quot;,…</span></a>
<a class="sourceLine" id="cb69-10" data-line-number="10"><span class="co">#&gt; $ CCT        &lt;chr&gt; &quot;15PPR3487P&quot;, &quot;06DPR0127X&quot;, &quot;31DPR1719O&quot;, &quot;30KPR2776X…</span></a>
<a class="sourceLine" id="cb69-11" data-line-number="11"><span class="co">#&gt; $ TURNO      &lt;chr&gt; &quot;MATUTINO&quot;, &quot;MATUTINO&quot;, &quot;MATUTINO&quot;, &quot;MATUTINO&quot;, &quot;MATU…</span></a>
<a class="sourceLine" id="cb69-12" data-line-number="12"><span class="co">#&gt; $ ESCUELA    &lt;chr&gt; &quot;COLEGIO FELIPE ANGELES&quot;, &quot;FEDERICO RANGEL FUENTES&quot;, …</span></a>
<a class="sourceLine" id="cb69-13" data-line-number="13"><span class="co">#&gt; $ TIPO       &lt;chr&gt; &quot;PARTICULAR&quot;, &quot;GENERAL&quot;, &quot;GENERAL&quot;, &quot;CONAFE&quot;, &quot;CONAFE…</span></a>
<a class="sourceLine" id="cb69-14" data-line-number="14"><span class="co">#&gt; $ CVE_MUN    &lt;chr&gt; &quot;099&quot;, &quot;002&quot;, &quot;050&quot;, &quot;178&quot;, &quot;078&quot;, &quot;031&quot;, &quot;018&quot;, &quot;014…</span></a>
<a class="sourceLine" id="cb69-15" data-line-number="15"><span class="co">#&gt; $ NOM_MUN    &lt;chr&gt; &quot;TEXCOCO&quot;, &quot;COLIMA&quot;, &quot;MERIDA&quot;, &quot;TLACOTALPAN&quot;, &quot;SAN CR…</span></a>
<a class="sourceLine" id="cb69-16" data-line-number="16"><span class="co">#&gt; $ CVE_LOC    &lt;chr&gt; &quot;0001&quot;, &quot;0001&quot;, &quot;0001&quot;, &quot;0137&quot;, &quot;0176&quot;, &quot;0558&quot;, &quot;0043…</span></a>
<a class="sourceLine" id="cb69-17" data-line-number="17"><span class="co">#&gt; $ NOM_LOC    &lt;chr&gt; &quot;TEXCOCO DE MORA&quot;, &quot;COLIMA&quot;, &quot;MERIDA&quot;, &quot;PLAYA MARTINE…</span></a>
<a class="sourceLine" id="cb69-18" data-line-number="18"><span class="co">#&gt; $ PUNT_ESP_3 &lt;dbl&gt; 531, 481, 481, 573, 387, 353, 490, 522, 552, 479, 630…</span></a>
<a class="sourceLine" id="cb69-19" data-line-number="19"><span class="co">#&gt; $ PUNT_MAT_3 &lt;dbl&gt; 549, 496, 492, 469, 416, 413, 529, 558, 596, 505, 671…</span></a>
<a class="sourceLine" id="cb69-20" data-line-number="20"><span class="co">#&gt; $ PUNT_FCE_3 &lt;dbl&gt; 477, 404, 439, 473, 341, 390, 437, 467, 505, 437, 575…</span></a>
<a class="sourceLine" id="cb69-21" data-line-number="21"><span class="co">#&gt; $ PUNT_ESP_4 &lt;dbl&gt; 481, 469, 522, NA, 337, 391, 539, 551, 590, 506, 744,…</span></a>
<a class="sourceLine" id="cb69-22" data-line-number="22"><span class="co">#&gt; $ PUNT_MAT_4 &lt;dbl&gt; 489, 508, 541, NA, 391, 400, 594, 579, 717, 569, 778,…</span></a>
<a class="sourceLine" id="cb69-23" data-line-number="23"><span class="co">#&gt; $ PUNT_FCE_4 &lt;dbl&gt; 441, 419, 492, NA, 397, 386, 509, 525, 567, 462, 664,…</span></a>
<a class="sourceLine" id="cb69-24" data-line-number="24"><span class="co">#&gt; $ PUNT_ESP_5 &lt;dbl&gt; 523, 536, 567, 561, 358, 372, 537, 507, 504, 512, 738…</span></a>
<a class="sourceLine" id="cb69-25" data-line-number="25"><span class="co">#&gt; $ PUNT_MAT_5 &lt;dbl&gt; 390, 545, 581, 628, 400, 341, 640, 546, 541, 620, 756…</span></a>
<a class="sourceLine" id="cb69-26" data-line-number="26"><span class="co">#&gt; $ PUNT_FCE_5 &lt;dbl&gt; 402, 502, 522, 527, 368, 356, 498, 462, 434, 486, 642…</span></a>
<a class="sourceLine" id="cb69-27" data-line-number="27"><span class="co">#&gt; $ PUNT_ESP_6 &lt;dbl&gt; 575, 503, 543, 491, 388, 384, 552, 548, 538, 513, 698…</span></a>
<a class="sourceLine" id="cb69-28" data-line-number="28"><span class="co">#&gt; $ PUNT_MAT_6 &lt;dbl&gt; 506, 539, 579, 555, 320, 376, 646, 625, 593, 587, 706…</span></a>
<a class="sourceLine" id="cb69-29" data-line-number="29"><span class="co">#&gt; $ PUNT_FCE_6 &lt;dbl&gt; 517, 469, 518, 378, 353, 338, 423, 488, 461, 446, 564…</span></a></code></pre></div>
<p><img src="img/manicule2.jpg" /> De manera similar a los ejemplos anteriores,
utiliza la función <code>gather</code> para apilar las columnas correspondientes a
área-grado.</p>
<p>            Piensa en
como podemos separar la “variable” área-grado en dos columnas.</p>
<p>Ahora separaremos las variables materia y grado de la columna <code>materia_grado</code>,
para ello debemos pasar a la función <code>separate()</code>, esta recibe como parámetros:</p>
<ul>
<li><p>el nombre de la base de datos,</p></li>
<li><p>el nombre de la variable que deseamos separar en más de una,</p></li>
<li><p>la posición de donde deseamos “cortar” (hay más opciones para especificar
como separar, ver <code>?separate</code>). El default es separar valores en todos los
lugares que encuentre un caracter que no es alfanumérico (espacio, guión,…).</p></li>
</ul>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1">enlacep_tidy &lt;-<span class="st"> </span><span class="kw">separate</span>(<span class="dt">data =</span> enlacep_long, <span class="dt">col =</span> AREA_GRADO, </a>
<a class="sourceLine" id="cb70-2" data-line-number="2">    <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;AREA&quot;</span>, <span class="st">&quot;GRADO&quot;</span>), <span class="dt">sep =</span> <span class="dv">9</span>)</a>
<a class="sourceLine" id="cb70-3" data-line-number="3">enlacep_tidy</a>
<a class="sourceLine" id="cb70-4" data-line-number="4"><span class="co">#&gt; # A tibble: 11,298 x 13</span></a>
<a class="sourceLine" id="cb70-5" data-line-number="5"><span class="co">#&gt;    CVE_ENT NOM_ENT CCT   TURNO ESCUELA TIPO  CVE_MUN NOM_MUN CVE_LOC</span></a>
<a class="sourceLine" id="cb70-6" data-line-number="6"><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  </span></a>
<a class="sourceLine" id="cb70-7" data-line-number="7"><span class="co">#&gt;  1 15      MEXICO  15PP… MATU… COLEGI… PART… 099     TEXCOCO 0001   </span></a>
<a class="sourceLine" id="cb70-8" data-line-number="8"><span class="co">#&gt;  2 06      COLIMA  06DP… MATU… FEDERI… GENE… 002     COLIMA  0001   </span></a>
<a class="sourceLine" id="cb70-9" data-line-number="9"><span class="co">#&gt;  3 31      YUCATAN 31DP… MATU… GUADAL… GENE… 050     MERIDA  0001   </span></a>
<a class="sourceLine" id="cb70-10" data-line-number="10"><span class="co">#&gt;  4 30      VERACR… 30KP… MATU… PLAYA … CONA… 178     TLACOT… 0137   </span></a>
<a class="sourceLine" id="cb70-11" data-line-number="11"><span class="co">#&gt;  5 07      CHIAPAS 07KP… MATU… JABALT… CONA… 078     SAN CR… 0176   </span></a>
<a class="sourceLine" id="cb70-12" data-line-number="12"><span class="co">#&gt;  6 07      CHIAPAS 07DP… MATU… &quot;NI\u0… INDê… 031     CHILON  0558   </span></a>
<a class="sourceLine" id="cb70-13" data-line-number="13"><span class="co">#&gt;  7 22      QUERET… 22DP… MATU… MARGAR… GENE… 018     TOLIMAN 0043   </span></a>
<a class="sourceLine" id="cb70-14" data-line-number="14"><span class="co">#&gt;  8 11      GUANAJ… 11EP… MATU… JUAN D… GENE… 014     DOLORE… 0124   </span></a>
<a class="sourceLine" id="cb70-15" data-line-number="15"><span class="co">#&gt;  9 22      QUERET… 22DP… MATU… CUAUHT… GENE… 012     PEDRO … 0028   </span></a>
<a class="sourceLine" id="cb70-16" data-line-number="16"><span class="co">#&gt; 10 14      JALISCO 14DP… MATU… ESCUEL… GENE… 055     MAGDAL… 0001   </span></a>
<a class="sourceLine" id="cb70-17" data-line-number="17"><span class="co">#&gt; # … with 11,288 more rows, and 4 more variables: NOM_LOC &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb70-18" data-line-number="18"><span class="co">#&gt; #   AREA &lt;chr&gt;, GRADO &lt;chr&gt;, PUNTAJE &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb70-19" data-line-number="19"></a>
<a class="sourceLine" id="cb70-20" data-line-number="20"><span class="co"># creamos un mejor código de área</span></a>
<a class="sourceLine" id="cb70-21" data-line-number="21">enlacep_tidy &lt;-<span class="st"> </span>enlacep_tidy <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb70-22" data-line-number="22"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb70-23" data-line-number="23">        <span class="dt">AREA =</span> <span class="kw">substr</span>(AREA, <span class="dv">6</span>, <span class="dv">8</span>),</a>
<a class="sourceLine" id="cb70-24" data-line-number="24">        <span class="dt">GRADO =</span> <span class="kw">as.numeric</span>(GRADO)</a>
<a class="sourceLine" id="cb70-25" data-line-number="25">        ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb70-26" data-line-number="26"><span class="st">    </span>janitor<span class="op">::</span><span class="kw">clean_names</span>()</a>
<a class="sourceLine" id="cb70-27" data-line-number="27"><span class="kw">glimpse</span>(enlacep_tidy)</a>
<a class="sourceLine" id="cb70-28" data-line-number="28"><span class="co">#&gt; Observations: 11,298</span></a>
<a class="sourceLine" id="cb70-29" data-line-number="29"><span class="co">#&gt; Variables: 13</span></a>
<a class="sourceLine" id="cb70-30" data-line-number="30"><span class="co">#&gt; $ cve_ent &lt;chr&gt; &quot;15&quot;, &quot;06&quot;, &quot;31&quot;, &quot;30&quot;, &quot;07&quot;, &quot;07&quot;, &quot;22&quot;, &quot;11&quot;, &quot;22&quot;, &quot;1…</span></a>
<a class="sourceLine" id="cb70-31" data-line-number="31"><span class="co">#&gt; $ nom_ent &lt;chr&gt; &quot;MEXICO&quot;, &quot;COLIMA&quot;, &quot;YUCATAN&quot;, &quot;VERACRUZ&quot;, &quot;CHIAPAS&quot;, &quot;C…</span></a>
<a class="sourceLine" id="cb70-32" data-line-number="32"><span class="co">#&gt; $ cct     &lt;chr&gt; &quot;15PPR3487P&quot;, &quot;06DPR0127X&quot;, &quot;31DPR1719O&quot;, &quot;30KPR2776X&quot;, …</span></a>
<a class="sourceLine" id="cb70-33" data-line-number="33"><span class="co">#&gt; $ turno   &lt;chr&gt; &quot;MATUTINO&quot;, &quot;MATUTINO&quot;, &quot;MATUTINO&quot;, &quot;MATUTINO&quot;, &quot;MATUTIN…</span></a>
<a class="sourceLine" id="cb70-34" data-line-number="34"><span class="co">#&gt; $ escuela &lt;chr&gt; &quot;COLEGIO FELIPE ANGELES&quot;, &quot;FEDERICO RANGEL FUENTES&quot;, &quot;GU…</span></a>
<a class="sourceLine" id="cb70-35" data-line-number="35"><span class="co">#&gt; $ tipo    &lt;chr&gt; &quot;PARTICULAR&quot;, &quot;GENERAL&quot;, &quot;GENERAL&quot;, &quot;CONAFE&quot;, &quot;CONAFE&quot;, …</span></a>
<a class="sourceLine" id="cb70-36" data-line-number="36"><span class="co">#&gt; $ cve_mun &lt;chr&gt; &quot;099&quot;, &quot;002&quot;, &quot;050&quot;, &quot;178&quot;, &quot;078&quot;, &quot;031&quot;, &quot;018&quot;, &quot;014&quot;, …</span></a>
<a class="sourceLine" id="cb70-37" data-line-number="37"><span class="co">#&gt; $ nom_mun &lt;chr&gt; &quot;TEXCOCO&quot;, &quot;COLIMA&quot;, &quot;MERIDA&quot;, &quot;TLACOTALPAN&quot;, &quot;SAN CRIST…</span></a>
<a class="sourceLine" id="cb70-38" data-line-number="38"><span class="co">#&gt; $ cve_loc &lt;chr&gt; &quot;0001&quot;, &quot;0001&quot;, &quot;0001&quot;, &quot;0137&quot;, &quot;0176&quot;, &quot;0558&quot;, &quot;0043&quot;, …</span></a>
<a class="sourceLine" id="cb70-39" data-line-number="39"><span class="co">#&gt; $ nom_loc &lt;chr&gt; &quot;TEXCOCO DE MORA&quot;, &quot;COLIMA&quot;, &quot;MERIDA&quot;, &quot;PLAYA MARTINEZ&quot;,…</span></a>
<a class="sourceLine" id="cb70-40" data-line-number="40"><span class="co">#&gt; $ area    &lt;chr&gt; &quot;ESP&quot;, &quot;ESP&quot;, &quot;ESP&quot;, &quot;ESP&quot;, &quot;ESP&quot;, &quot;ESP&quot;, &quot;ESP&quot;, &quot;ESP&quot;, …</span></a>
<a class="sourceLine" id="cb70-41" data-line-number="41"><span class="co">#&gt; $ grado   &lt;dbl&gt; 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,…</span></a>
<a class="sourceLine" id="cb70-42" data-line-number="42"><span class="co">#&gt; $ puntaje &lt;dbl&gt; 531, 481, 481, 573, 387, 353, 490, 522, 552, 479, 630, 5…</span></a></code></pre></div>
</div>
<div id="variables-almacenadas-en-filas-y-columnas" class="section level3 unnumbered">
<h3>Variables almacenadas en filas y columnas</h3>
<p>El problema más difícil es cuando las variables están tanto en filas como en
columnas, veamos una base de datos de fertilidad. ¿Cuáles son las
variables en estos datos?</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1"><span class="kw">data</span>(<span class="st">&quot;df_fertility&quot;</span>)</a>
<a class="sourceLine" id="cb71-2" data-line-number="2">df_fertility</a>
<a class="sourceLine" id="cb71-3" data-line-number="3"><span class="co">#&gt; # A tibble: 306 x 11</span></a>
<a class="sourceLine" id="cb71-4" data-line-number="4"><span class="co">#&gt;    state size_localidad est   age_15_19 age_20_24 age_25_29 age_30_34</span></a>
<a class="sourceLine" id="cb71-5" data-line-number="5"><span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt;          &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb71-6" data-line-number="6"><span class="co">#&gt;  1 01 A… Menos de 2 50… Valor     74.2     175.      175.      102.  </span></a>
<a class="sourceLine" id="cb71-7" data-line-number="7"><span class="co">#&gt;  2 01 A… Menos de 2 50… Erro…      6.71     11.0       9.35      8.05</span></a>
<a class="sourceLine" id="cb71-8" data-line-number="8"><span class="co">#&gt;  3 01 A… 2 500-14 999 … Valor     82.5     171.      140.      103.  </span></a>
<a class="sourceLine" id="cb71-9" data-line-number="9"><span class="co">#&gt;  4 01 A… 2 500-14 999 … Erro…      9.79     12.5      10.4       8.76</span></a>
<a class="sourceLine" id="cb71-10" data-line-number="10"><span class="co">#&gt;  5 01 A… 15 000-49 999… Valor     72.6     146.      147.       99.0 </span></a>
<a class="sourceLine" id="cb71-11" data-line-number="11"><span class="co">#&gt;  6 01 A… 15 000-49 999… Erro…      7.07     10.8      10.5       8.11</span></a>
<a class="sourceLine" id="cb71-12" data-line-number="12"><span class="co">#&gt;  7 01 A… 100 000 y más… Valor     66.3     120.      102.       84.2 </span></a>
<a class="sourceLine" id="cb71-13" data-line-number="13"><span class="co">#&gt;  8 01 A… 100 000 y más… Erro…      7.57      8.66      8.98      8.59</span></a>
<a class="sourceLine" id="cb71-14" data-line-number="14"><span class="co">#&gt;  9 02 B… Menos de 2 50… Valor     89.6     158.      117.       86.0 </span></a>
<a class="sourceLine" id="cb71-15" data-line-number="15"><span class="co">#&gt; 10 02 B… Menos de 2 50… Erro…     15.8      17.2      13.2      12.3 </span></a>
<a class="sourceLine" id="cb71-16" data-line-number="16"><span class="co">#&gt; # … with 296 more rows, and 4 more variables: age_35_39 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb71-17" data-line-number="17"><span class="co">#&gt; #   age_40_44 &lt;dbl&gt;, age_45_49 &lt;dbl&gt;, global &lt;dbl&gt;</span></a></code></pre></div>
<p>Estos datos tienen variables en columnas individuales (state, size_localidad),
en múltiples columnas (grupo de edad, age_15_19,..) y en filas (Valor y
Error estándar).</p>
<p>Comencemos por apilar las columnas.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1">fertility_long &lt;-<span class="st"> </span><span class="kw">gather</span>(df_fertility, age_bracket, value, age_<span class="dv">15</span>_<span class="dv">19</span><span class="op">:</span>global, </a>
<a class="sourceLine" id="cb72-2" data-line-number="2">    <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb72-3" data-line-number="3">fertility_long</a>
<a class="sourceLine" id="cb72-4" data-line-number="4"><span class="co">#&gt; # A tibble: 2,448 x 5</span></a>
<a class="sourceLine" id="cb72-5" data-line-number="5"><span class="co">#&gt;    state             size_localidad          est          age_bracket value</span></a>
<a class="sourceLine" id="cb72-6" data-line-number="6"><span class="co">#&gt;    &lt;chr&gt;             &lt;chr&gt;                   &lt;chr&gt;        &lt;chr&gt;       &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb72-7" data-line-number="7"><span class="co">#&gt;  1 01 Aguascalientes Menos de 2 500 habitan… Valor        age_15_19   74.2 </span></a>
<a class="sourceLine" id="cb72-8" data-line-number="8"><span class="co">#&gt;  2 01 Aguascalientes Menos de 2 500 habitan… Error están… age_15_19    6.71</span></a>
<a class="sourceLine" id="cb72-9" data-line-number="9"><span class="co">#&gt;  3 01 Aguascalientes 2 500-14 999 habitantes Valor        age_15_19   82.5 </span></a>
<a class="sourceLine" id="cb72-10" data-line-number="10"><span class="co">#&gt;  4 01 Aguascalientes 2 500-14 999 habitantes Error están… age_15_19    9.79</span></a>
<a class="sourceLine" id="cb72-11" data-line-number="11"><span class="co">#&gt;  5 01 Aguascalientes 15 000-49 999 habitant… Valor        age_15_19   72.6 </span></a>
<a class="sourceLine" id="cb72-12" data-line-number="12"><span class="co">#&gt;  6 01 Aguascalientes 15 000-49 999 habitant… Error están… age_15_19    7.07</span></a>
<a class="sourceLine" id="cb72-13" data-line-number="13"><span class="co">#&gt;  7 01 Aguascalientes 100 000 y más habitant… Valor        age_15_19   66.3 </span></a>
<a class="sourceLine" id="cb72-14" data-line-number="14"><span class="co">#&gt;  8 01 Aguascalientes 100 000 y más habitant… Error están… age_15_19    7.57</span></a>
<a class="sourceLine" id="cb72-15" data-line-number="15"><span class="co">#&gt;  9 02 Baja Californ… Menos de 2 500 habitan… Valor        age_15_19   89.6 </span></a>
<a class="sourceLine" id="cb72-16" data-line-number="16"><span class="co">#&gt; 10 02 Baja Californ… Menos de 2 500 habitan… Error están… age_15_19   15.8 </span></a>
<a class="sourceLine" id="cb72-17" data-line-number="17"><span class="co">#&gt; # … with 2,438 more rows</span></a></code></pre></div>
<p>Podemos crear algunas variables adicionales.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" data-line-number="1">fertility_vars &lt;-<span class="st"> </span>fertility_long <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb73-2" data-line-number="2"><span class="st">    </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb73-3" data-line-number="3">        <span class="dt">state_code =</span> <span class="kw">str_sub</span>(state, <span class="dv">1</span>, <span class="dv">2</span>), </a>
<a class="sourceLine" id="cb73-4" data-line-number="4">        <span class="dt">state_name =</span> <span class="kw">str_sub</span>(state, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb73-5" data-line-number="5">        ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-6" data-line-number="6"><span class="st">    </span><span class="kw">select</span>(<span class="op">-</span>state)</a>
<a class="sourceLine" id="cb73-7" data-line-number="7">fertility_vars</a>
<a class="sourceLine" id="cb73-8" data-line-number="8"><span class="co">#&gt; # A tibble: 2,448 x 6</span></a>
<a class="sourceLine" id="cb73-9" data-line-number="9"><span class="co">#&gt;    size_localidad       est       age_bracket value state_code state_name  </span></a>
<a class="sourceLine" id="cb73-10" data-line-number="10"><span class="co">#&gt;    &lt;chr&gt;                &lt;chr&gt;     &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;       </span></a>
<a class="sourceLine" id="cb73-11" data-line-number="11"><span class="co">#&gt;  1 Menos de 2 500 habi… Valor     age_15_19   74.2  01         Aguascalien…</span></a>
<a class="sourceLine" id="cb73-12" data-line-number="12"><span class="co">#&gt;  2 Menos de 2 500 habi… Error es… age_15_19    6.71 01         Aguascalien…</span></a>
<a class="sourceLine" id="cb73-13" data-line-number="13"><span class="co">#&gt;  3 2 500-14 999 habita… Valor     age_15_19   82.5  01         Aguascalien…</span></a>
<a class="sourceLine" id="cb73-14" data-line-number="14"><span class="co">#&gt;  4 2 500-14 999 habita… Error es… age_15_19    9.79 01         Aguascalien…</span></a>
<a class="sourceLine" id="cb73-15" data-line-number="15"><span class="co">#&gt;  5 15 000-49 999 habit… Valor     age_15_19   72.6  01         Aguascalien…</span></a>
<a class="sourceLine" id="cb73-16" data-line-number="16"><span class="co">#&gt;  6 15 000-49 999 habit… Error es… age_15_19    7.07 01         Aguascalien…</span></a>
<a class="sourceLine" id="cb73-17" data-line-number="17"><span class="co">#&gt;  7 100 000 y más habit… Valor     age_15_19   66.3  01         Aguascalien…</span></a>
<a class="sourceLine" id="cb73-18" data-line-number="18"><span class="co">#&gt;  8 100 000 y más habit… Error es… age_15_19    7.57 01         Aguascalien…</span></a>
<a class="sourceLine" id="cb73-19" data-line-number="19"><span class="co">#&gt;  9 Menos de 2 500 habi… Valor     age_15_19   89.6  02         Baja Califo…</span></a>
<a class="sourceLine" id="cb73-20" data-line-number="20"><span class="co">#&gt; 10 Menos de 2 500 habi… Error es… age_15_19   15.8  02         Baja Califo…</span></a>
<a class="sourceLine" id="cb73-21" data-line-number="21"><span class="co">#&gt; # … with 2,438 more rows</span></a></code></pre></div>
<p>Finalmente, la columna <em>est</em> no es una variable, sino que almacena el nombre
de 5 variables, la operación que debemos aplicar (<code>spread</code>) es el inverso de
apilar (<code>gather</code>):</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1">fertility_tidy &lt;-<span class="st"> </span><span class="kw">spread</span>(<span class="dt">data =</span> fertility_vars, <span class="dt">key =</span> est, <span class="dt">value =</span> value)</a></code></pre></div>
<p>Y podemos mejorar los nombres de las columnas, una opción <em>rápida</em> es usar el
paquete <code>janitor</code>.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" data-line-number="1">fertility_tidy <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb75-2" data-line-number="2"><span class="st">    </span>janitor<span class="op">::</span><span class="kw">clean_names</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb75-3" data-line-number="3"><span class="st">    </span><span class="kw">glimpse</span>()</a>
<a class="sourceLine" id="cb75-4" data-line-number="4"><span class="co">#&gt; Observations: 1,224</span></a>
<a class="sourceLine" id="cb75-5" data-line-number="5"><span class="co">#&gt; Variables: 6</span></a>
<a class="sourceLine" id="cb75-6" data-line-number="6"><span class="co">#&gt; $ size_localidad &lt;chr&gt; &quot;100 000 y más habitantes&quot;, &quot;100 000 y más habita…</span></a>
<a class="sourceLine" id="cb75-7" data-line-number="7"><span class="co">#&gt; $ age_bracket    &lt;chr&gt; &quot;age_15_19&quot;, &quot;age_15_19&quot;, &quot;age_15_19&quot;, &quot;age_15_19…</span></a>
<a class="sourceLine" id="cb75-8" data-line-number="8"><span class="co">#&gt; $ state_code     &lt;chr&gt; &quot;01&quot;, &quot;02&quot;, &quot;03&quot;, &quot;04&quot;, &quot;05&quot;, &quot;06&quot;, &quot;07&quot;, &quot;08&quot;, &quot;…</span></a>
<a class="sourceLine" id="cb75-9" data-line-number="9"><span class="co">#&gt; $ state_name     &lt;chr&gt; &quot;Aguascalientes&quot;, &quot;Baja California&quot;, &quot;Baja Califo…</span></a>
<a class="sourceLine" id="cb75-10" data-line-number="10"><span class="co">#&gt; $ error_estandar &lt;dbl&gt; 7.572352, 3.204220, 13.055474, 9.145983, 4.819321…</span></a>
<a class="sourceLine" id="cb75-11" data-line-number="11"><span class="co">#&gt; $ valor          &lt;dbl&gt; 66.33564, 43.03023, 58.97916, 61.79522, 80.08338,…</span></a></code></pre></div>
<p>o podemos hacerlo manualmente</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" data-line-number="1"><span class="kw">names</span>(fertility_tidy)[<span class="dv">5</span><span class="op">:</span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;est&quot;</span>, <span class="st">&quot;std_error&quot;</span>)</a></code></pre></div>
<p>Ahora es inmediato no solo hacer gráficas sino también ajustar un modelo.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" data-line-number="1"><span class="co"># ajustamos un modelo lineal donde la variable respuesta es temperatura </span></a>
<a class="sourceLine" id="cb77-2" data-line-number="2"><span class="co"># máxima, y la variable explicativa es el mes</span></a>
<a class="sourceLine" id="cb77-3" data-line-number="3">fertility_sub &lt;-<span class="st"> </span><span class="kw">filter</span>(fertility_tidy, age_bracket <span class="op">!=</span><span class="st"> &quot;global&quot;</span>)</a>
<a class="sourceLine" id="cb77-4" data-line-number="4">fertility_lm &lt;-<span class="st"> </span><span class="kw">lm</span>(est <span class="op">~</span><span class="st"> </span>age_bracket, <span class="dt">data =</span> fertility_sub)</a>
<a class="sourceLine" id="cb77-5" data-line-number="5"><span class="kw">summary</span>(fertility_lm)</a>
<a class="sourceLine" id="cb77-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb77-7" data-line-number="7"><span class="co">#&gt; Call:</span></a>
<a class="sourceLine" id="cb77-8" data-line-number="8"><span class="co">#&gt; lm(formula = est ~ age_bracket, data = fertility_sub)</span></a>
<a class="sourceLine" id="cb77-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb77-10" data-line-number="10"><span class="co">#&gt; Residuals:</span></a>
<a class="sourceLine" id="cb77-11" data-line-number="11"><span class="co">#&gt;     Min      1Q  Median      3Q     Max </span></a>
<a class="sourceLine" id="cb77-12" data-line-number="12"><span class="co">#&gt; -7.3784 -2.3282 -0.5896  1.1359 31.5091 </span></a>
<a class="sourceLine" id="cb77-13" data-line-number="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb77-14" data-line-number="14"><span class="co">#&gt; Coefficients:</span></a>
<a class="sourceLine" id="cb77-15" data-line-number="15"><span class="co">#&gt;                      Estimate Std. Error t value Pr(&gt;|t|)    </span></a>
<a class="sourceLine" id="cb77-16" data-line-number="16"><span class="co">#&gt; (Intercept)            6.8723     0.3277  20.973  &lt; 2e-16 ***</span></a>
<a class="sourceLine" id="cb77-17" data-line-number="17"><span class="co">#&gt; age_bracketage_20_24   2.3948     0.4634   5.168 2.83e-07 ***</span></a>
<a class="sourceLine" id="cb77-18" data-line-number="18"><span class="co">#&gt; age_bracketage_25_29   2.3272     0.4634   5.022 5.99e-07 ***</span></a>
<a class="sourceLine" id="cb77-19" data-line-number="19"><span class="co">#&gt; age_bracketage_30_34   1.2363     0.4634   2.668  0.00775 ** </span></a>
<a class="sourceLine" id="cb77-20" data-line-number="20"><span class="co">#&gt; age_bracketage_35_39  -0.9413     0.4634  -2.031  0.04246 *  </span></a>
<a class="sourceLine" id="cb77-21" data-line-number="21"><span class="co">#&gt; age_bracketage_40_44  -3.7525     0.4634  -8.098 1.52e-15 ***</span></a>
<a class="sourceLine" id="cb77-22" data-line-number="22"><span class="co">#&gt; age_bracketage_45_49  -6.0480     0.4634 -13.051  &lt; 2e-16 ***</span></a>
<a class="sourceLine" id="cb77-23" data-line-number="23"><span class="co">#&gt; ---</span></a>
<a class="sourceLine" id="cb77-24" data-line-number="24"><span class="co">#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span></a>
<a class="sourceLine" id="cb77-25" data-line-number="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb77-26" data-line-number="26"><span class="co">#&gt; Residual standard error: 4.053 on 1064 degrees of freedom</span></a>
<a class="sourceLine" id="cb77-27" data-line-number="27"><span class="co">#&gt; Multiple R-squared:  0.3479, Adjusted R-squared:  0.3443 </span></a>
<a class="sourceLine" id="cb77-28" data-line-number="28"><span class="co">#&gt; F-statistic: 94.62 on 6 and 1064 DF,  p-value: &lt; 2.2e-16</span></a></code></pre></div>
</div>
<div id="mas-de-un-tipo-de-observacion-en-una-misma-tabla" class="section level3 unnumbered">
<h3>Mas de un tipo de observación en una misma tabla</h3>
<p>Esta es quizá el principio menos importante de datos limpios y su conveniencia
dependerá de la situación, pero vale la pena conocerlo.</p>
<p>En ocasiones las bases de datos involucran valores en diferentes niveles, en
diferentes tipos de unidad observacional. En la limpieza de datos, cada unidad
observacional debe estar almacenada en su propia tabla (esto esta ligado a
normalización de una base de datos), es importante para evitar inconsistencias
en los datos.</p>
<p>¿Cuáles son las unidades observacionales de los datos <code>df_mxmunicipio</code>?</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" data-line-number="1">df_mxmunicipio</a>
<a class="sourceLine" id="cb78-2" data-line-number="2"><span class="co">#&gt; # A tibble: 2,457 x 18</span></a>
<a class="sourceLine" id="cb78-3" data-line-number="3"><span class="co">#&gt;    state_code municipio_code region state_name state_name_offi… state_abbr</span></a>
<a class="sourceLine" id="cb78-4" data-line-number="4"><span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;          &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;            &lt;chr&gt;     </span></a>
<a class="sourceLine" id="cb78-5" data-line-number="5"><span class="co">#&gt;  1 01         001            01001  Aguascali… Aguascalientes   AGS       </span></a>
<a class="sourceLine" id="cb78-6" data-line-number="6"><span class="co">#&gt;  2 01         002            01002  Aguascali… Aguascalientes   AGS       </span></a>
<a class="sourceLine" id="cb78-7" data-line-number="7"><span class="co">#&gt;  3 01         003            01003  Aguascali… Aguascalientes   AGS       </span></a>
<a class="sourceLine" id="cb78-8" data-line-number="8"><span class="co">#&gt;  4 01         004            01004  Aguascali… Aguascalientes   AGS       </span></a>
<a class="sourceLine" id="cb78-9" data-line-number="9"><span class="co">#&gt;  5 01         005            01005  Aguascali… Aguascalientes   AGS       </span></a>
<a class="sourceLine" id="cb78-10" data-line-number="10"><span class="co">#&gt;  6 01         006            01006  Aguascali… Aguascalientes   AGS       </span></a>
<a class="sourceLine" id="cb78-11" data-line-number="11"><span class="co">#&gt;  7 01         007            01007  Aguascali… Aguascalientes   AGS       </span></a>
<a class="sourceLine" id="cb78-12" data-line-number="12"><span class="co">#&gt;  8 01         008            01008  Aguascali… Aguascalientes   AGS       </span></a>
<a class="sourceLine" id="cb78-13" data-line-number="13"><span class="co">#&gt;  9 01         009            01009  Aguascali… Aguascalientes   AGS       </span></a>
<a class="sourceLine" id="cb78-14" data-line-number="14"><span class="co">#&gt; 10 01         010            01010  Aguascali… Aguascalientes   AGS       </span></a>
<a class="sourceLine" id="cb78-15" data-line-number="15"><span class="co">#&gt; # … with 2,447 more rows, and 12 more variables:</span></a>
<a class="sourceLine" id="cb78-16" data-line-number="16"><span class="co">#&gt; #   state_abbr_official &lt;chr&gt;, municipio_name &lt;chr&gt;, pop &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb78-17" data-line-number="17"><span class="co">#&gt; #   pop_male &lt;int&gt;, pop_female &lt;int&gt;, afromexican &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb78-18" data-line-number="18"><span class="co">#&gt; #   part_afromexican &lt;dbl&gt;, indigenous &lt;dbl&gt;, part_indigenous &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb78-19" data-line-number="19"><span class="co">#&gt; #   metro_area &lt;chr&gt;, long &lt;dbl&gt;, lat &lt;dbl&gt;</span></a></code></pre></div>
<p>Separemos esta base de datos en dos: la tabla a nivel municipio que almacena las
variables de sexo (sex) a escolaridad media (schoolyrs).</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" data-line-number="1">df_mxmunicipio_normal &lt;-<span class="st"> </span>df_mxmunicipio <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb79-2" data-line-number="2"><span class="st">    </span><span class="kw">select</span>(state_code, municipio_code, region, municipio_name<span class="op">:</span>lat)</a>
<a class="sourceLine" id="cb79-3" data-line-number="3"><span class="kw">glimpse</span>(df_mxmunicipio_normal)</a>
<a class="sourceLine" id="cb79-4" data-line-number="4"><span class="co">#&gt; Observations: 2,457</span></a>
<a class="sourceLine" id="cb79-5" data-line-number="5"><span class="co">#&gt; Variables: 14</span></a>
<a class="sourceLine" id="cb79-6" data-line-number="6"><span class="co">#&gt; $ state_code       &lt;chr&gt; &quot;01&quot;, &quot;01&quot;, &quot;01&quot;, &quot;01&quot;, &quot;01&quot;, &quot;01&quot;, &quot;01&quot;, &quot;01&quot;,…</span></a>
<a class="sourceLine" id="cb79-7" data-line-number="7"><span class="co">#&gt; $ municipio_code   &lt;chr&gt; &quot;001&quot;, &quot;002&quot;, &quot;003&quot;, &quot;004&quot;, &quot;005&quot;, &quot;006&quot;, &quot;007&quot;…</span></a>
<a class="sourceLine" id="cb79-8" data-line-number="8"><span class="co">#&gt; $ region           &lt;chr&gt; &quot;01001&quot;, &quot;01002&quot;, &quot;01003&quot;, &quot;01004&quot;, &quot;01005&quot;, &quot;0…</span></a>
<a class="sourceLine" id="cb79-9" data-line-number="9"><span class="co">#&gt; $ municipio_name   &lt;chr&gt; &quot;Aguascalientes&quot;, &quot;Asientos&quot;, &quot;Calvillo&quot;, &quot;Cosí…</span></a>
<a class="sourceLine" id="cb79-10" data-line-number="10"><span class="co">#&gt; $ pop              &lt;int&gt; 877190, 46464, 56048, 15577, 120405, 46473, 538…</span></a>
<a class="sourceLine" id="cb79-11" data-line-number="11"><span class="co">#&gt; $ pop_male         &lt;int&gt; 425731, 22745, 27298, 7552, 60135, 22490, 26693…</span></a>
<a class="sourceLine" id="cb79-12" data-line-number="12"><span class="co">#&gt; $ pop_female       &lt;int&gt; 451459, 23719, 28750, 8025, 60270, 23983, 27173…</span></a>
<a class="sourceLine" id="cb79-13" data-line-number="13"><span class="co">#&gt; $ afromexican      &lt;dbl&gt; 532, 3, 10, 0, 32, 3, 13, 13, 4, 0, 43, 1139, 3…</span></a>
<a class="sourceLine" id="cb79-14" data-line-number="14"><span class="co">#&gt; $ part_afromexican &lt;dbl&gt; 2791, 130, 167, 67, 219, 74, 578, 37, 59, 60, 3…</span></a>
<a class="sourceLine" id="cb79-15" data-line-number="15"><span class="co">#&gt; $ indigenous       &lt;dbl&gt; 104125, 1691, 7358, 2213, 8679, 6232, 6714, 173…</span></a>
<a class="sourceLine" id="cb79-16" data-line-number="16"><span class="co">#&gt; $ part_indigenous  &lt;dbl&gt; 14209, 92, 2223, 191, 649, 251, 247, 84, 76, 24…</span></a>
<a class="sourceLine" id="cb79-17" data-line-number="17"><span class="co">#&gt; $ metro_area       &lt;chr&gt; &quot;Aguascalientes&quot;, NA, NA, NA, &quot;Aguascalientes&quot;,…</span></a>
<a class="sourceLine" id="cb79-18" data-line-number="18"><span class="co">#&gt; $ long             &lt;dbl&gt; -102.29605, -102.08928, -102.71875, -102.30004,…</span></a>
<a class="sourceLine" id="cb79-19" data-line-number="19"><span class="co">#&gt; $ lat              &lt;dbl&gt; 21.87982, 22.23832, 21.84691, 22.36641, 21.9612…</span></a></code></pre></div>
<p>Y la tabla a nivel estado, que almacena las claves y variables a nivel
estado.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" data-line-number="1">df_statecodes &lt;-<span class="st"> </span>df_mxmunicipio <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb80-2" data-line-number="2"><span class="st">    </span><span class="kw">select</span>(<span class="kw">contains</span>(<span class="st">&quot;state&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb80-3" data-line-number="3"><span class="st">    </span><span class="kw">distinct</span>()</a>
<a class="sourceLine" id="cb80-4" data-line-number="4"><span class="kw">glimpse</span>(df_statecodes)</a>
<a class="sourceLine" id="cb80-5" data-line-number="5"><span class="co">#&gt; Observations: 32</span></a>
<a class="sourceLine" id="cb80-6" data-line-number="6"><span class="co">#&gt; Variables: 5</span></a>
<a class="sourceLine" id="cb80-7" data-line-number="7"><span class="co">#&gt; $ state_code          &lt;chr&gt; &quot;01&quot;, &quot;02&quot;, &quot;03&quot;, &quot;04&quot;, &quot;05&quot;, &quot;06&quot;, &quot;07&quot;, &quot;0…</span></a>
<a class="sourceLine" id="cb80-8" data-line-number="8"><span class="co">#&gt; $ state_name          &lt;chr&gt; &quot;Aguascalientes&quot;, &quot;Baja California&quot;, &quot;Baja C…</span></a>
<a class="sourceLine" id="cb80-9" data-line-number="9"><span class="co">#&gt; $ state_name_official &lt;chr&gt; &quot;Aguascalientes&quot;, &quot;Baja California&quot;, &quot;Baja C…</span></a>
<a class="sourceLine" id="cb80-10" data-line-number="10"><span class="co">#&gt; $ state_abbr          &lt;chr&gt; &quot;AGS&quot;, &quot;BC&quot;, &quot;BCS&quot;, &quot;CAMP&quot;, &quot;COAH&quot;, &quot;COL&quot;, &quot;…</span></a>
<a class="sourceLine" id="cb80-11" data-line-number="11"><span class="co">#&gt; $ state_abbr_official &lt;chr&gt; &quot;Ags.&quot;, &quot;BC&quot;, &quot;BCS&quot;, &quot;Camp.&quot;, &quot;Coah.&quot;, &quot;Col.…</span></a></code></pre></div>
</div>
<div id="una-misma-unidad-observacional-esta-almacenada-en-multiples-tablas" class="section level3 unnumbered">
<h3>Una misma unidad observacional está almacenada en múltiples tablas</h3>
<p>También es común que los valores sobre una misma unidad observacional estén
separados en muchas tablas o archivos, es común que estas tablas esten divididas
de acuerdo a una variable, de tal manera que cada archivo representa a una
persona, año o ubicación. Para juntar los archivos hacemos lo siguiente:</p>
<ol style="list-style-type: decimal">
<li>Leemos los archivos en una lista de tablas.</li>
<li>Para cada tabla agregamos una columna que registra el nombre del archivo
original.</li>
<li>Combinamos las tablas en un solo data frame.</li>
</ol>
<p>Veamos un ejemplo, descarga la carpeta con los datos de varios contaminantes
de RAMA,</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" data-line-number="1">usethis<span class="op">::</span><span class="kw">use_zip</span>(<span class="st">&quot;https://github.com/tereom/estcomp/raw/master/data-raw/19RAMA.zip&quot;</span>, </a>
<a class="sourceLine" id="cb81-2" data-line-number="2">    <span class="st">&quot;data&quot;</span>)</a></code></pre></div>
<p>ésta contiene 9 archivos de excel que almacenan información de monitoreo de
contaminantes. Cada archivo contiene información de un contaminante y el nombre
del archivo indica el contaminante.</p>
<p>Los pasos en R (usando el paquete <code>purrr</code>), primero creamos un vector con los
nombres de los archivos en un directorio, eligiendo aquellos que contengan las
letras “.csv”.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" data-line-number="1">paths &lt;-<span class="st"> </span><span class="kw">dir</span>(<span class="st">&quot;data/19RAMA&quot;</span>, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.xls$&quot;</span>, <span class="dt">full.names =</span> <span class="ot">TRUE</span>) </a>
<a class="sourceLine" id="cb82-2" data-line-number="2">paths</a>
<a class="sourceLine" id="cb82-3" data-line-number="3"><span class="co">#&gt; character(0)</span></a></code></pre></div>
<p>Después le asignamos el nombre del archivo al nombre de cada elemento del vector.
Este paso se realiza para preservar los nombres de los archivos ya que estos
los asignaremos a una variable mas adelante.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" data-line-number="1">paths &lt;-<span class="st"> </span><span class="kw">set_names</span>(paths, <span class="kw">basename</span>(paths))</a></code></pre></div>
<p>La función <code>map_df</code> itera sobre cada dirección, lee el archivo excel de dicha
dirección y los combina en un data frame.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" data-line-number="1"><span class="kw">library</span>(readxl)</a>
<a class="sourceLine" id="cb84-2" data-line-number="2">rama &lt;-<span class="st"> </span><span class="kw">map_df</span>(paths, read_excel, <span class="dt">.id =</span> <span class="st">&quot;FILENAME&quot;</span>)</a>
<a class="sourceLine" id="cb84-3" data-line-number="3"></a>
<a class="sourceLine" id="cb84-4" data-line-number="4"><span class="co"># eliminamos la basura del id</span></a>
<a class="sourceLine" id="cb84-5" data-line-number="5">rama &lt;-<span class="st"> </span>rama <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb84-6" data-line-number="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">PARAMETRO =</span> <span class="kw">str_remove</span>(FILENAME, <span class="st">&quot;2019&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str_remove</span>(<span class="st">&quot;.xls&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb84-7" data-line-number="7"><span class="st">  </span><span class="kw">select</span>(PARAMETRO, FECHA<span class="op">:</span>AJU)</a>
<a class="sourceLine" id="cb84-8" data-line-number="8"><span class="co">#&gt; Error in stri_replace_first_regex(string, pattern, fix_replacement(replacement), : object &#39;FILENAME&#39; not found</span></a>
<a class="sourceLine" id="cb84-9" data-line-number="9"><span class="co"># y apilamos para tener una columna por estación</span></a>
<a class="sourceLine" id="cb84-10" data-line-number="10">rama_tidy &lt;-<span class="st"> </span>rama <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb84-11" data-line-number="11"><span class="st">    </span><span class="kw">gather</span>(estacion, valor, ACO<span class="op">:</span>AJU) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb84-12" data-line-number="12"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">valor =</span> <span class="kw">ifelse</span>(<span class="op">-</span><span class="dv">99</span>, <span class="ot">NA</span>, valor))</a>
<a class="sourceLine" id="cb84-13" data-line-number="13"><span class="co">#&gt; Error in is_string(x): object &#39;ACO&#39; not found</span></a>
<a class="sourceLine" id="cb84-14" data-line-number="14">rama_tidy</a>
<a class="sourceLine" id="cb84-15" data-line-number="15"><span class="co">#&gt; Error in eval(expr, envir, enclos): object &#39;rama_tidy&#39; not found</span></a></code></pre></div>
</div>
<div id="otras-consideraciones" class="section level3 unnumbered">
<h3>Otras consideraciones</h3>
<p>En las buenas prácticas es importante tomar en cuenta los siguientes puntos:</p>
<ul>
<li><p>Incluir un encabezado con el nombre de las variables.</p></li>
<li><p>Los nombres de las variables deben ser entendibles (e.g. AgeAtDiagnosis es
mejor que AgeDx).</p></li>
<li><p>En general los datos se deben guardar en un archivo por tabla.</p></li>
<li><p>Escribir un script con las modificaciones que se hicieron a los <em>datos crudos</em>
(reproducibilidad).</p></li>
<li><p>Otros aspectos importantes en la <em>limpieza</em> de datos son: selección del tipo
de variables (por ejemplo fechas), datos faltantes, <em>typos</em> y detección de
valores atípicos.</p></li>
</ul>
</div>
<div id="recursos-adicionales" class="section level3 unnumbered">
<h3>Recursos adicionales</h3>
<ul>
<li><a href="https://github.com/rstudio/cheatsheets/raw/master/data-transformation.pdf">Data Transformation Cheat Sheet</a>,
RStudio.</li>
</ul>

</div>
</div>
<!-- </div> -->
<h3>Referencias</h3>
<div id="refs" class="references">
<div id="ref-tidy">
<p>Wickham, Hadley. 2014. “Tidy Data.” <em>Journal of Statistical Software, Articles</em> 59 (10):1–23. <a href="https://doi.org/10.18637/jss.v059.i10" class="uri">https://doi.org/10.18637/jss.v059.i10</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="transformacion-de-datos.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tareas.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/tereom/est-computacional-2019/edit/master/02-manipulacion.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
